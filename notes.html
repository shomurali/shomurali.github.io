<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-10-20">

<title>Chance and the Box Model</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="notes_files/libs/clipboard/clipboard.min.js"></script>
<script src="notes_files/libs/quarto-html/quarto.js"></script>
<script src="notes_files/libs/quarto-html/popper.min.js"></script>
<script src="notes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="notes_files/libs/quarto-html/anchor.min.js"></script>
<link href="notes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="notes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="notes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="notes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="notes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-box-model" id="toc-the-box-model" class="nav-link active" data-scroll-target="#the-box-model">The Box Model</a>
  <ul class="collapse">
  <li><a href="#a-box-of-tickets" id="toc-a-box-of-tickets" class="nav-link" data-scroll-target="#a-box-of-tickets">A box of tickets</a></li>
  <li><a href="#setting-up-a-box-model-examples" id="toc-setting-up-a-box-model-examples" class="nav-link" data-scroll-target="#setting-up-a-box-model-examples">Setting up a box model: examples</a>
  <ul class="collapse">
  <li><a href="#example-1-tossing-a-fair-coin-and-counting-the-number-of-heads" id="toc-example-1-tossing-a-fair-coin-and-counting-the-number-of-heads" class="nav-link" data-scroll-target="#example-1-tossing-a-fair-coin-and-counting-the-number-of-heads">Example 1: Tossing a fair coin and counting the number of heads</a></li>
  <li><a href="#example-2-rolling-a-fair-die-and-summing-the-spots" id="toc-example-2-rolling-a-fair-die-and-summing-the-spots" class="nav-link" data-scroll-target="#example-2-rolling-a-fair-die-and-summing-the-spots">Example 2: Rolling a fair die and summing the spots</a></li>
  <li><a href="#example-3-betting-on-red-in-roulette" id="toc-example-3-betting-on-red-in-roulette" class="nav-link" data-scroll-target="#example-3-betting-on-red-in-roulette">Example 3: Betting on red in roulette</a></li>
  <li><a href="#example-4-donkeys-in-kenya" id="toc-example-4-donkeys-in-kenya" class="nav-link" data-scroll-target="#example-4-donkeys-in-kenya">Example 4: Donkeys in Kenya</a></li>
  <li><a href="#example-5-antarctic-penguins" id="toc-example-5-antarctic-penguins" class="nav-link" data-scroll-target="#example-5-antarctic-penguins">Example 5: Antarctic penguins</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#simulating-the-box-model" id="toc-simulating-the-box-model" class="nav-link" data-scroll-target="#simulating-the-box-model">Simulating the box model</a>
  <ul class="collapse">
  <li><a href="#tossing-a-fair-coin" id="toc-tossing-a-fair-coin" class="nav-link" data-scroll-target="#tossing-a-fair-coin">Tossing a fair coin</a></li>
  <li><a href="#rolling-a-pair-of-dice-and-summing-the-spots" id="toc-rolling-a-pair-of-dice-and-summing-the-spots" class="nav-link" data-scroll-target="#rolling-a-pair-of-dice-and-summing-the-spots">Rolling a pair of dice and summing the spots</a></li>
  <li><a href="#sampling-from-penguins" id="toc-sampling-from-penguins" class="nav-link" data-scroll-target="#sampling-from-penguins">Sampling from penguins</a></li>
  </ul></li>
  <li><a href="#rules-of-chance" id="toc-rules-of-chance" class="nav-link" data-scroll-target="#rules-of-chance">Rules of chance</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Chance and the Box Model</h1>
<p class="subtitle lead">We will introduce the ideas of chance, or probability, via a simple mechanism called a box model.</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">class date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 20, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p><a href="https://app.perusall.com"><span class="btn btn-primary">Discuss</span></a> <a href="https://www.gradescope.com/courses/416233"><span class="btn btn-primary">Reading Questions</span></a> <a href="notes.pdf"><span class="btn btn-primary">PDF</span></a></p>
<p><br>
</p>
<div class="cell">

</div>
<p><span class="dropcap">I</span>n the last set of notes, we revisited the data cycle, and saw that, in order to use the obtained data to answer a question about our <em>target population</em>, we have to make sure that our data is representative of the population. Most people have some understanding of what it means for a sample to be representative. In the picture below, which sample would you say better represents the population in the box?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/two-samples.jpeg" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>The mechanisms and methods we use for obtaining data are crucial in determining whether the data will be useful in answering our question about the target population. They are the <em>protocols</em> for our experimental design, or measurements, or survey design and sampling. For example, if the data are from a clinical trial for a new Covid-19 treatment, the design of the trial will decide who gets the treatment, and who doesn’t. Or perhaps we want to poll voters to see if there is support for decriminalizing marijuana possession federally (President Biden took a first step towards this goal by pardoning all Americans convicted of simple marijuana possession under federal law). Who is selected for such an opinion poll can make a big difference in the estimate of the proportion of voters that support decriminalization of marijuana. You may have observed that some polling companies are more successful than others in their estimates and predictions, and consequently they are taken more seriously. Below is a snapshot of rankings of polling organizations from the well-known website FiveThirtyEight<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. According to the website, the rankings are based on the polling organization’s ``historical accuracy and methodology’’</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/538-pollster-ranking-snippet.png" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
<p>You learned about the variation in data that is induced by using <em>chance</em> to select the data - the variation could be caused by the sampling method, or the way units are assigned to groups, or from measurement error. In order to understand variation, we have to understand the chance mechanism which was used to collect the data. In these notes, we are going to describe methods by which we can obtain representative samples from the target population - or rather, from our access frame. In practice, it is rare for the access frame and target population to exactly coincide. We need to design our data collection methods (our protocols) so that our target population and our access frame overlap as much as we can manage. This is achieved using methods that incorporate chance.</p>
<section id="the-box-model" class="level2">
<h2 class="anchored" data-anchor-id="the-box-model">The Box Model</h2>
<p>One of the simplest ways of understanding chance, and later variation, is by considering a <em>box model</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. A box model consists of a box with numbered tickets, from which tickets are drawn. To specify a box model, we have to say what tickets go in the box (that is, what are the numbers on the tickets, and how many of each) , and whether they will be drawn <em>with or without replacement</em> (after drawing a ticket from the box, do we put it back in the box or not, before we draw another ticket).</p>
<section id="a-box-of-tickets" class="level3">
<h3 class="anchored" data-anchor-id="a-box-of-tickets">A box of tickets</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/box-1.jpeg" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>Consider the box above which has five almost identical tickets. The only difference is the value written on them. Imagine that we shake the box to mix the tickets up, and then draw one ticket without looking. This is to ensure that all the tickets are <em>equally likely</em> to be drawn<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. For example, the chance of drawing a ticket labeled “4” is one in five, as there are five tickets to choose from and only one is labeled “4” etc.</p>
<p>Here is a bar chart that shows how the box values are distributed, and you see that there are twice as many tickets marked</p>
<div class="cell" data-layout-align="center">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>box <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(box) <span class="sc">%&gt;%</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>box)) <span class="sc">+</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.98</span>, <span class="at">fill =</span> <span class="st">"gray55"</span>) <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ticket value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Let’s make a table of all the tickets and their chances. This is called a <em>distribution table</em>.</p>
<center>
<div style="width:300px">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Ticket</th>
<th style="text-align: center;">Chance of being drawn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\fbox{1}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\displaystyle \frac{1}{5}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\fbox{2}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\displaystyle \frac{2}{5}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\fbox{3}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\displaystyle \frac{1}{5}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\fbox{4}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\displaystyle \frac{1}{5}\)</span></td>
</tr>
</tbody>
</table>
</div>
</center>
<p>We could plot the chances using <code>geom_col()</code>:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tkt_value <span class="ot">&lt;-</span> <span class="fu">unique</span>(box)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>tkt_prob <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>, <span class="dv">2</span><span class="sc">/</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">cbind</span>(tkt_value, tkt_prob)) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>tkt_value, <span class="at">y=</span>tkt_prob)) <span class="sc">+</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.98</span>, <span class="at">fill =</span> <span class="st">"grey 55"</span>) <span class="sc">+</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ticket value"</span>) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"chance of being drawn"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>They look the same!! In fact, in the first figure, if we looked at proportion instead of count, the figures would be identical!</p>
<iframe src="https://giphy.com/embed/7GcdjWkek7Apq" width="300" height="170" frameborder="0" class="giphy-embed" allowfullscreen="">
</iframe>
<p>
<a href="https://giphy.com/gifs/highquality-incredibles-coincidence-7GcdjWkek7Apq">via giphy</a>
</p>
<p>This makes sense because the tickets are equally likely to be drawn, so their distribution in the box (the first figure) completely determines their chance of being drawn (the second figure).</p>
<p>Since the tickets are drawn according to their chance, we could compute what a draw would be, on average, by computing a weighted (by their chance) average of the possible values. We would get, for a single draw: <span class="math inline">\(1\times \frac{1}{5} + 2 \times \frac{2}{5} + 3 \times \frac{1}{5} + 4 \times \frac{1}{5} = 2.4\)</span>. Note that this happens to be the average of the tickets in the box.</p>
<p>How about if we draw 30 times at random with replacement from this box and see what our sample looks like (we will explore the code later in the notes). That is, we will see what proportion of the draws are 1’s, 2’s etc.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">=</span><span class="dv">30</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>sample_box <span class="ot">=</span> <span class="fu">sample</span>(box, <span class="at">size =</span> sample_size, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(sample_box) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(sample_box)) <span class="sc">+</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..prop..), <span class="at">width =</span> <span class="fl">0.98</span>, <span class="at">fill =</span> <span class="st">"grey55"</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"values of draws"</span>) <span class="sc">+</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"proportion of draws"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>We can see that the <em>sample proportions</em> look similar to the <em>population (box) proportions</em>, but are somewhat different. It turns out that the counts of the drawn tickets are:</p>
<center>
<div style="width:300px">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Ticket</th>
<th style="text-align: center;">Number of times drawn</th>
<th style="text-align: center;">Proportion of times drawn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\fbox{1}\)</span></td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\fbox{2}\)</span></td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">0.4333333</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\fbox{3}\)</span></td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">0.2666667</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\fbox{4}\)</span></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.1</td>
</tr>
</tbody>
</table>
</div>
</center>
<p>What we have seen here is how when we draw at random, we get a sample that resembles the population, that is, a <em>representative sample</em>.</p>
<p><strong>With or without replacement?</strong></p>
<p>When we draw at random <em>with</em> replacement, we draw one ticket, and put it back before drawing another ticket. For the box in this section, if we draw twice, both times we will draw from the following box:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/box.jpeg" class="img-fluid figure-img" width="200"></p>
</figure>
</div>
<p>If we draw twice at random <em>without</em> replacement, then our second draw is from a <em>different</em> box, illustrated below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/no-replace-box.jpeg" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
<p><br>
</p>
<p><strong>The Box Model</strong></p>
<p>The purpose of creating a box model is to understand the variability in a <em>chance process</em> such as tossing a coin over and over and counting the number of heads, or sampling voters to ask them if they will vote for Prop 1 in November’s elections. We do this by having the tickets represent the possible outcomes associated with the chance process, and using the variability in the tickets that are drawn to understand the variability of the chance process.</p>
<p>In order to create a box model that will model a chance process, we must specify:</p>
<ol type="1">
<li>The box and tickets (what tickets go in the box, and the numbers written on them)</li>
<li>The number of draws</li>
<li>Whether or not we replace tickets between draws</li>
<li>How we will summarize the values on the drawn tickets (usually take the sum or of draws or the average of draws)</li>
</ol>
<p>Note that these tickets should be identical in every way, except the value written on them, and assume that the tickets in the box are <em>equally likely</em> to be drawn (we draw without looking at the box).</p>
</section>
<section id="setting-up-a-box-model-examples" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-a-box-model-examples">Setting up a box model: examples</h3>
<p>Let’s practice creating boxes to model common scenarios.For each of the cases below, specify the four items above.</p>
<section id="example-1-tossing-a-fair-coin-and-counting-the-number-of-heads" class="level4">
<h4 class="anchored" data-anchor-id="example-1-tossing-a-fair-coin-and-counting-the-number-of-heads">Example 1: Tossing a fair coin and counting the number of heads</h4>
<p><img src="images/us-quarter.png" class="img-fluid" width="100"></p>
<p><strong>Tossing a fair coin once</strong></p>
<p>What box and which tickets would you use to simulate one coin toss?</p>
<details>
<summary>
Check your answer
</summary>
<p>We could draw one ticket from the box <img src="images/coin_ht.jpeg" class="img-fluid" data-fig-align="center" width="100"> but these are not numbered!</p>
Or we could draw one ticket from the box <img src="images/coin.jpeg" class="img-fluid" width="100"> with the ticket <span class="math inline">\(\fbox{1}\)</span> representing the coin landing heads, and <span class="math inline">\(\fbox{0}\)</span> representing the coin landing tails. This change of numbering the ticket representing the outcome we are counting with a 1 and all other tickets with a 0 is very important, since we are <em>classifying</em> the outcomes into two categories, and counting the instances of one of them (in this case, the coin landing heads).
</details>
<div class="callout-warning callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Ask yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>What box would we use if the coin is not a fair coin, but lands heads <span class="math inline">\(5\)</span> out of <span class="math inline">\(6\)</span> times?</p>
</div>
</div>
<p><strong>Tossing a fair coin twice</strong></p>
<details>
<summary>
Check your answer
</summary>
<p>We could use the same box as above:</p>
<p><img src="images/coin.jpeg" class="img-fluid" width="100"></p>
Remember that the ticket <span class="math inline">\(\fbox{1}\)</span> represents the outcome of a toss landing heads and <span class="math inline">\(\fbox{0}\)</span> represents a toss landing tails (because we are counting the number of heads). We let the box be as above, and draw two tickets at random <em>with replacement</em> from this box. To count the number of heads in two tosses, we add the draws.
</details>
<p><strong>Tossing an unfair coin</strong></p>
<p>Set up the box model for tossing a coin which has chance of 5/6 landing heads, and counting the number of heads.</p>
<details>
<summary>
Check your answer
</summary>
<p>We do the same trick, of representing the outcome of heads with <span class="math inline">\(\fbox{1}\)</span>, and tails with <span class="math inline">\(\fbox{0}\)</span>. Since the coin lands heads 5 times out of 6, the box is given by:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/unfair-coin.jpeg" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
We draw as many times as the number of tosses, and sum up the values on the tickets drawn.
</details>
</section>
<section id="example-2-rolling-a-fair-die-and-summing-the-spots" class="level4">
<h4 class="anchored" data-anchor-id="example-2-rolling-a-fair-die-and-summing-the-spots">Example 2: Rolling a fair die and summing the spots</h4>
<p><img src="images/dice.png" class="img-fluid" width="100"><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p><strong>Rolling a fair die once</strong></p>
<details>
<summary>
Check your answer
</summary>
<p>The box will have six tickets as shown below, and we would draw one ticket from this box. The chance of any one of the tickets is <span class="math inline">\(1/6\)</span>.</p>
<img src="images/die.jpeg" class="img-fluid" width="200">
</details>
<p><strong>Rolling a fair die twice</strong></p>
<details>
<summary>
Check your answer
</summary>
<p>We would use the same box as in the previous example, draw <em>twice</em> at random with replacement from this box, then add the draws.</p>
<p><img src="images/two-dice.jpeg" class="img-fluid" width="450"></p>
</details>
</section>
<section id="example-3-betting-on-red-in-roulette" class="level4">
<h4 class="anchored" data-anchor-id="example-3-betting-on-red-in-roulette">Example 3: Betting on red in roulette</h4>
<p><img src="images/roulette-us.jpg" class="img-fluid" data-fig-align="center" width="200"><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>An American roulette wheel has 38 pockets, of which 18 are red, 18 black, and 2 are green. The wheel is spun, and a small ball is thrown on the wheel so that it is equally likely to land in any of the 38 pockets. Players bet on which colored or numbered pocket the ball will come to rest in. If you bet one dollar that the ball will land on red, and it does, you get your dollar back, and you win one dollar, so your <em>gain</em> is $1. If it doesn’t, and lands on a black or green number, you lose your dollar, and your <em>gain</em> is -$1. What would be the box model for your gain from a single spin?</p>
<p><strong>Gain from a single spin</strong></p>
<details>
<summary>
Check your answer
</summary>
<p>We would use the box shown below marked “Gain”. In the top box, there are 38 tickets, each representing a numbered pocket on the wheel. Draw one ticket to represent the ball landing in a particular pocket. In the second row each ticket represents a colored pocket, and we see that there are 18 red pockets, 18 black, and 2 green. We only care about the outcome <em>ball lands in red pocket</em>, and our gain from this. We would draw once from it, with the ticket marked <span class="math inline">\(\fbox{+1}\)</span> representing our gain if the ball lands on a red pocket, and the ticket <span class="math inline">\(\fbox{-1}\)</span> representing our loss if the ball doesn’t land on red. We can see that the chance of drawing a <span class="math inline">\(\fbox{+1}\)</span> is 18 out of 38.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/roulette-bet.jpeg" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</details>
<p><strong>Gain from 10 spins</strong></p>
<p>How would we model our <em>net gain</em> or winnings from 10 spins (we bet $1 on each spin, and either lose it or get it back plus $1)?</p>
<details>
<summary>
Check your answer
</summary>
Use the same box as above, with 18 tickets marked <span class="math inline">\(\fbox{+1}\)</span> and 20 marked <span class="math inline">\(\fbox{-1}\)</span>, draw 10 times at random with replacement, and sum the draws.
</details>
</section>
<section id="example-4-donkeys-in-kenya" class="level4">
<h4 class="anchored" data-anchor-id="example-4-donkeys-in-kenya">Example 4: Donkeys in Kenya</h4>
<p><img src="images/kenyan-donkey.jpeg" class="img-fluid" data-fig-align="center" width="200"><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>Recall the case study we saw about donkeys in Kenya. The question in the study was how to predict the weight of donkeys using measurements that were easier to obtain, and they obtained the data by measuring donkeys at 17 sites in 2010<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>.</p>
<p>Four body measurements were made for each donkey: liveweight (kg), heart girth (cm), height (cm), and length (cm), and in addition, sex and body condition score were recorded (the bcs categorized the donkeys according to their condition, ranging from “emaciated” to “obese”). Suppose I want to sample 50 donkeys from this dataset, to compute their average weight and average girth (girth or heart girth is the circumference of the body, measured just behind the front legs.)</p>
<p>Set up the box model for this process (sampling donkeys).</p>
<details>
<summary>
Check your answer
</summary>
<p>The box has 544 tickets, one for each donkey. The ticket has information from all 8 variables recorded (3 categorical and 5 numerical). We only need 2 variables, so the tickets will have those two variables recorded. We draw 50 tickets from this box at random <em>without</em> replacement, and compute 2 averages from the draws.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/donkey-tkt.jpeg" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</details>
</section>
<section id="example-5-antarctic-penguins" class="level4">
<h4 class="anchored" data-anchor-id="example-5-antarctic-penguins">Example 5: Antarctic penguins</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/penguins.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
<p>You have seen the penguins data, which measured 8 variables on a sample of 344. Here the box will contain 344 tickets, and we will draw 50 tickets at random without replacement. Note that each ticket in the box represents one penguin in the sample has information for multiple variables measured on that penguin, and we would consider only the information we are interested in. Suppose we wanted sex, species, and flipper length, to compare the flipper lengths of males and females, grouped by species.</p>
<details>
<summary>
Check your answer
</summary>
<p>The box would have 344 tickets, one for each penguin. Each ticket would have 3 things written on it: the species, sex, and flipper length in mm of the penguin. We would draw 50 tickets at random without replacement, and <img src="images/penguin-ticket.jpeg" class="img-fluid" data-fig-align="center" width="2000"></p>
</details></section>
</section>
</section>
<section id="simulating-the-box-model" class="level2">
<h2 class="anchored" data-anchor-id="simulating-the-box-model">Simulating the box model</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code along
</div>
</div>
<div class="callout-body-container callout-body">
<p>As you read through these notes, keep RStudio open in another window to code along at the console.</p>
</div>
</div>
<p>The box model is easily simulated in R, since there is a convenient function that does exactly what we need: draw tickets from a “box” (a vector). We will use the function <code>sample(x, size = n, replace = FALSE)</code>, where <code>x</code> is the vector you want to sample from, <code>size</code> is the number of draws (with the default value being the length of <code>x</code>), and <code>replace</code> specifies whether the draws are with or without replacement. The default in <code>sample()</code> is to draw them without replacement.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(box,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>We can use <code>sample()</code> to <em>estimate</em> the chance of a particular outcome when we aren’t sure of what that chance might be. We would do this by repeatedly sampling from the “box” with replacement (many times), then computing the proportion of times we drew each ticket. For example, say we consider the box from above, and want to estimate the chance of each ticket.</p>
<p>In the code below, another new function is introduced: <code>replicate()</code>. The function <code>replicate(reps, expr)</code> is a very useful function that takes as input an expression <code>expr</code> and evaluates it <code>reps</code> times, returning a vector.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">2000</span>, <span class="fu">sample</span>(box, <span class="dv">1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">as.data.frame</span>(draws), <span class="fu">aes</span>(<span class="at">x=</span>draws)) <span class="sc">+</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>..prop..), <span class="at">fill=</span><span class="st">"gray50"</span>)<span class="sc">+</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"proportion of draws"</span>) <span class="sc">+</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ticket drawn"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>We see that the chance of drawing a <span class="math inline">\(\fbox{2}\)</span> is about 0.4, twice the chance of drawing any other ticket, which makes sense as there were two tickets marked 2. Of course, we could have written down the chance of drawing a 2 without needing to code it in R. But let’s think of a more complicated situation:</p>
<p>What if we wanted to wanted to draw <em>five</em> tickets with replacement from this box, and sum the draws? What would be the possible values that we would get? What could their chances be? We can visualize this in R:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">5000</span>, <span class="fu">sum</span>(<span class="fu">sample</span>(box, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">as.data.frame</span>(draws), <span class="fu">aes</span>(<span class="at">x=</span>draws)) <span class="sc">+</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>..prop..), <span class="at">fill=</span><span class="st">"gray50"</span>)<span class="sc">+</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"proportion"</span>) <span class="sc">+</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"sum of draws"</span>) <span class="sc">+</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(draws), <span class="fu">max</span>(draws), <span class="at">by =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>We can see that there is a lot more variation in the values taken by the sum of 5 draws.</p>
<section id="tossing-a-fair-coin" class="level4">
<h4 class="anchored" data-anchor-id="tossing-a-fair-coin">Tossing a fair coin</h4>
<p>We can estimate the chances of various outcomes related to coin tossing, using the box.</p>
<p>Suppose, for example, that we would like to figure out the chance of exactly 2 heads if we toss a coin 4 times. Think about how you would use the functions <code>sample()</code> and <code>replicate()</code> to model this, using the 0-1 box we defined earlier, for tossing a coin.</p>
<div class="cell">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>coin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="co">#1 represents the toss landing heads</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>two_heads <span class="ot">&lt;-</span><span class="fu">replicate</span>(<span class="dv">50000</span>, <span class="fu">sum</span>(<span class="fu">sample</span>(coin, <span class="dv">4</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"The proportion of times we see 2 heads out of 4 tosses is"</span>, <span class="fu">mean</span>(two_heads))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The proportion of times we see 2 heads out of 4 tosses is 0.37816</code></pre>
</div>
</div>
</section>
<section id="rolling-a-pair-of-dice-and-summing-the-spots" class="level4">
<h4 class="anchored" data-anchor-id="rolling-a-pair-of-dice-and-summing-the-spots">Rolling a pair of dice and summing the spots</h4>
<p>This is something that we could use if we wanted to play Monopoly and couldn’t find the dice. Recall the box we used to simulate a die roll. Now we are going to define a vector in R to represent a die, and sample twice with replacement, from this vector.</p>
<div class="cell">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>die <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># to simulate rolling a die twice and summing the spots</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">sample</span>(die, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(draws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<p>We could also repeat it many times and estimate the chance of each of the possible outcomes.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>many_draws <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">5000</span>, <span class="fu">sum</span>(<span class="fu">sample</span>(die, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">as.data.frame</span>(many_draws), <span class="fu">aes</span>(<span class="at">x=</span>many_draws)) <span class="sc">+</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>..prop..), <span class="at">fill=</span><span class="st">"gray50"</span>)<span class="sc">+</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"proportion"</span>) <span class="sc">+</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"sum of two draws"</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(many_draws), </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">max</span>(many_draws), <span class="at">by =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="notes_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<div class="callout-warning callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Ask yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>We know all the possible outcomes of summing a pair of dice (between <span class="math inline">\(2\)</span> and <span class="math inline">\(12\)</span> spots). Why not make a box with tickets labeled <span class="math inline">\(2, 3, 4, \ldots, 12\)</span> and draw <em>once</em> from that box? If we did indeed want a box from which we would only draw once, what would the box be? (Hint: How many possible outcomes would there be if you rolled a pair of dice. )</p>
</div>
</div>
</section>
<section id="sampling-from-penguins" class="level4">
<h4 class="anchored" data-anchor-id="sampling-from-penguins">Sampling from penguins</h4>
<p>Note that in example 7, when the box has 344 tickets, with each ticket representing one of the observations that we have access to from the Palmer penguins data, each ticket contains the values of multiple variables. Suppose we want to sample the penguins, to estimate what is the chance of being a Gentoo penguin. Note that this is not real, since our “box” is itself a sample, and not the population. We are going to use the penguin data, to see how we might sample when the box is really a data frame, that is, it has multiple variables.</p>
<p>First we will use <code>slice_sample</code>, which you have seen before, and compute the proportion of Gentoo penguins in this single sample. Then we will sample repeatedly from the box, each time drawing 50 tickets.For each sample, we will compute the number of Gentoo penguins in the sample, and estimate the actual proportion of Gentoos in the box. (Note that we <em>know</em> the true value in the box, it is about 0.36.</p>
<div class="cell">
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># one sample</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prop_gentoo =</span> <span class="fu">mean</span>(species <span class="sc">==</span> <span class="st">"Gentoo"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  prop_gentoo
        &lt;dbl&gt;
1        0.32</code></pre>
</div>
<details>
<summary>.</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1000 samples of size 50, and we take the proportion of gentoo for each</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and then find the average of these 1000 proportions.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  penguins <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep_slice_sample</span>(<span class="at">n=</span><span class="dv">50</span>, <span class="at">reps =</span> <span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">prop_gentoo =</span> <span class="fu">mean</span>(species <span class="sc">==</span> <span class="st">"Gentoo"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">estimate_prop_gentoo =</span> <span class="fu">mean</span>(prop_gentoo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  estimate_prop_gentoo
                 &lt;dbl&gt;
1                0.361</code></pre>
</div>
</div>
</section>
</section>
<section id="rules-of-chance" class="level2">
<h2 class="anchored" data-anchor-id="rules-of-chance">Rules of chance</h2>
<p>What we have done here is estimate chances using the idea that the <em>chance</em> (or probability) of something is the proportion of times it occurs when we simulate over and over again the basic process that results in the thing we are counting. We have used the definition of the chance of an outcome to be the proportion of times we expect it to occur when the process that generates the event is <em>independently</em> repeated many times <a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>.</p>
<p>The chance of an event (where an <em>event</em> might be one outcome, such as “rolling a die and seeing 2”, or a collection of outcomes, such as “rolling an even number”) needs to satisfy some basic mathematical rules (which are intuitively clear if you think of the chance of an event as its relative frequency):</p>
<ol type="1">
<li><p>The chance of any event is at least 0 and not more than 1.</p></li>
<li><p>We call the collection of all possible outcomes the <em>sample space</em>. The chance of the sample space is 1.</p></li>
<li><p>If two events do not overlap, that is they have no outcomes in common, then the chance that <em>either</em> of the two events might occur is the <em>sum</em> of their chances. For example, consider rolling a fair six-sided die, and the two events of rolling a multiple of 5 or a multiple of 2. In the first event (which we can call <span class="math inline">\(A\)</span>), the possible outcomes are <span class="math inline">\(\{5\}\)</span>. For the second event (call it <span class="math inline">\(B\)</span>), the possible outcomes are <span class="math inline">\(\{2, 4, 6\}\)</span>. Since all the sides of a fair die are equally likely, the chance of <span class="math inline">\(A\)</span> is the chance of rolling a <span class="math inline">\(5\)</span> which is <span class="math inline">\(1/6\)</span>. The chance of rolling an even number is <span class="math inline">\(1/6 + 1/6 +1/6 = 3/6\)</span> (applying the same idea of adding up the chances, since we can’t have the die show two sides at the same time). This implies that the chance of <em>either</em> <span class="math inline">\(A\)</span> <em>or</em> <span class="math inline">\(B\)</span> happening is <span class="math inline">\(1/6 + 3/6 = 4/6\)</span>.</p></li>
</ol>
<p>Note that <em>both</em> events cannot happen - using a six-sided die, you cannot roll a multiple of 5 that is also an even number. We say then that the event that both <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> happen is impossible, and impossible events have no chance of occurring. That is the chance of <span class="math inline">\(A\)</span> <em>and</em> <span class="math inline">\(B\)</span> is 0.</p>
</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>This website was begun as poll aggregation site, by the statistician Nate Silver.]<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>The box model was introduced by Freedman, Pisani, and Purves in their textbook <a href="https://wwnorton.com/books/9780393929720"><em>Statistics</em></a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>We call the tickets equally likely when each ticket has the same chance of being drawn. That is, if there are <span class="math inline">\(n\)</span> tickets in the box, each has a chance of <span class="math inline">\(1/n\)</span> to be drawn. We also refer to this as drawing a ticket <em>uniformly at random</em>, because the chance of drawing the tickets are the same, or <em>uniform</em>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>Photo via unsplash.com<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>Photo via unsplash.com<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p><a href="https://people.maths.bris.ac.uk/~mazjcr/#donkeys" class="uri">https://people.maths.bris.ac.uk/~mazjcr/#donkeys</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>K. Milner and J.C. Rougier, 2014. <em>How to weigh a donkey in the Kenyan countryside</em>. Significance, 11(4), 40–43. 74, 115 <a href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/j.1740-9713.2014.00768.x" class="uri">https://rss.onlinelibrary.wiley.com/doi/full/10.1111/j.1740-9713.2014.00768.x</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p>This is known as the <em>frequentist</em> theory of probability: the chance of something is the relative frequency with which it occurs in repeated trials (that are assumed to be independent).<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>